<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>duplicated request</title>
</head>
<body>
<button id="connect">connect</button>
<script>
  const connect = document.getElementById('connect')

  let xhr = null;
  let isSending = false;

  connect.onclick = ()=>{
      if (isSending) return
      isSending = true
      xhr = new XMLHttpRequest()
      xhr.open('GET', 'http://localhost:8000/delay')
      xhr.send()
      xhr.onreadystatechange = ()=>{
          if (xhr.readyState === 4) isSending = false
      }
  }

</script>
</body>
</html>